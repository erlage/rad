test('should set data attributes', () async {
    await app!.buildChildren(
        widgets: [
            __WidgetClass__(
            key: GlobalKey('some-global-key'),
                dataAttributes: {
                    'something': 'something okay',
                    'another': 'another okay',
                },
            ),
        ],
        parentContext: RT_TestBed.rootContext,
    );

    var element1 = RT_TestBed.rootElement.childNodes[0] as HtmlElement;

    expect(element1.dataset['something'], equals('something okay'));
    expect(element1.dataset['another'], equals('another okay'));
}__Skip__);


test('should remove obsolute and add new data attributes on update', () async {
    await app!.buildChildren(
        widgets: [
            __WidgetClass__(
            key: GlobalKey('some-global-key'),
                dataAttributes: {
                    'something': 'something okay',
                },
            ),
        ],
        parentContext: app!.appContext,
    );

    await app!.updateChildren(
        widgets: [
            __WidgetClass__(
                key: GlobalKey('some-global-key'),
                dataAttributes: {
                    'something-new': 'something new',
                },
            ),
        ],
        updateType: UpdateType.undefined,
        parentContext: app!.appContext,
    );

    var element1 = RT_TestBed.rootElement.childNodes[0].childNodes[0];

    element1 as HtmlElement;

    expect(element1.dataset['something'], equals(null));
    expect(element1.dataset['something-new'], equals('something new'));
}__Skip__);

test('should not override system reserved data attributes on build', () async {
    await app!.buildChildren(
        widgets: [
            __WidgetClass__(
                key: GlobalKey('some-global-key'),
                dataAttributes: {
                    'something': 'something okay',
                    Constants.attrWidgetType: 'must ignore',
                },
            ),
        ],
        parentContext: app!.appContext,
    );

    var element1 = RT_TestBed.rootElement.childNodes[0].childNodes[0];

    element1 as HtmlElement;

    expect(element1.dataset['something'], equals('something okay'));

    expect(element1.dataset[Constants.attrWidgetType], equals(null));
}__Skip__);

test('should not remove system reserved data attributes on update', () async {
    await app!.buildChildren(
        widgets: [
            __WidgetClass__(
            key: GlobalKey('some-global-key'),
                dataAttributes: {
                    'something': 'something okay',
                    Constants.attrWidgetType: 'must ignore',
                },
            ),
        ],
        parentContext: app!.appContext,
    );

    await app!.updateChildren(
        widgets: [
            __WidgetClass__(
                key: GlobalKey('some-global-key'),
                dataAttributes: {
                    'something': 'something new',
                    'something-diff': 'something diff',
                    Constants.attrWidgetType: 'must ignore',
                },
            ),
        ],
        updateType: UpdateType.undefined,
        parentContext: app!.appContext,
    );
    
    var element1 = RT_TestBed.rootElement.childNodes[0].childNodes[0];

    element1 as HtmlElement;

    expect(element1.dataset['something'], equals('something new'));
    expect(element1.dataset['something-diff'], equals('something diff'));
    expect(element1.dataset[Constants.attrWidgetType], equals(null));
}__Skip__);